"use strict";(self.webpackChunkcommonlands_web=self.webpackChunkcommonlands_web||[]).push([[2137],{36700:function(e,n,t){t.d(n,{x:function(){return s}});var r=t(1413),i=t(15671),o=t(43144),a=t(60136),u=t(29388),p=t(95122),l=t(75691),c=t(61309),s=function(e){(0,a.Z)(t,e);var n=(0,u.Z)(t);function t(e){return(0,i.Z)(this,t),n.call(this,(0,r.Z)((0,r.Z)({},e),{},{constraint:new p.Hk(e.targetPoint)}))}return(0,o.Z)(t,[{key:"hints",get:function(){return[new c.n(this.targetPoint,this.isDraped,this.domain)]}}]),t}(l.a)},26823:function(e,n,t){t.r(n),t.d(n,{FeatureCollectionSnappingSource:function(){return Z}});var r=t(93433),i=t(74165),o=t(15861),a=t(15671),u=t(43144),p=t(60136),l=t(29388),c=t(27366),s=t(85015),y=t(92026),g=t(66978),v=t(94172),f=t(49861),d=(t(25243),t(63780),t(69912)),h=t(74509),_=t(64674),b=t(52824),w=t(59877),S=t(53580),k=t(48817),Z=function(e){(0,p.Z)(t,e);var n=(0,l.Z)(t);function t(e){var r;return(0,a.Z)(this,t),(r=n.call(this,e)).view=null,r._layerView3D=null,r}return(0,u.Z)(t,[{key:"availability",get:function(){return 1}},{key:"updating",get:function(){return this.layerSource.updating}},{key:"_snappingElevationAligner",get:function(){var e=this.view,n=this.layerSource.layer,t=(0,y.pC)(e)&&"3d"===e.type;if(!t||"subtype-group"===n.type)return(0,w.p)();var r=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(r,o){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.Hl)(e.whenLayerView(n),o);case 2:return t.abrupt("return",t.sent.elevationAlignPointsInFeatures(r,o));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return(0,w.p)(t,{elevationInfo:n.elevationInfo,alignPointsInFeatures:r,spatialReference:e.spatialReference})}},{key:"_snappingElevationFilter",get:function(){var e=this.view,n=(0,y.pC)(e)&&"3d"===e.type&&"subtype-group"!==this.layerSource.layer.type;return(0,S.c)(n)}},{key:"_symbologySnappingFetcher",get:function(){var e=this.view,n=this.layerSource.layer;return(0,y.pC)(e)&&"3d"===e.type&&"subtype-group"!==n.type?(0,k.k)(this._symbologySnappingSupported,function(){var t=(0,o.Z)((0,i.Z)().mark((function t(r,o){var a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.whenLayerView(n);case 2:return a=t.sent,t.abrupt("return",((0,g.k_)(o),a.queryForSymbologySnapping({candidates:r,spatialReference:e.spatialReference},o)));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()):(0,k.k)()}},{key:"_symbologySnappingSupported",get:function(){return(0,y.pC)(this._layerView3D)&&this._layerView3D.symbologySnappingSupported}},{key:"initialize",value:function(){var e=this,n=this.view,t=this.layerSource.layer;(0,y.pC)(n)&&"3d"===n.type&&"subtype-group"!==t.type&&(n.whenLayerView(t).then((function(n){return e._layerView3D=n})),this.addHandles([n.elevationProvider.on("elevation-change",(function(n){var r=n.context,i=t.elevationInfo;(0,h.W_)(r,i)&&e._snappingElevationAligner.notifyElevationSourceChange()})),(0,v.YP)((function(){return t.elevationInfo}),(function(){return e._snappingElevationAligner.notifyElevationSourceChange()}),v.nn),(0,v.YP)((function(){var n;return(0,y.pC)(e._layerView3D)?null===(n=e._layerView3D.processor)||void 0===n?void 0:n.renderer:null}),(function(){return e._symbologySnappingFetcher.notifySymbologyChange()}),v.nn),(0,v.on)((function(){var n;return null===(n=(0,y.WG)(e._layerView3D))||void 0===n?void 0:n.layer}),["edits","apply-edits","graphic-update"],(function(){return e._symbologySnappingFetcher.notifySymbologyChange()}))]))}},{key:"refresh",value:function(){}},{key:"fetchCandidates",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,t){var o,a,u,p,l,c,s,v,f,d,h,w;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=this.layerSource.layer,null!==(p=u.source)&&void 0!==p&&p.querySnapping){e.next=3;break}return e.abrupt("return",[]);case 3:return l=(0,_.ML)(u),c=(0,_.rh)(n,null!==(o=null===(a=(0,y.Wg)(this.view))||void 0===a?void 0:a.type)&&void 0!==o?o:"2d",l),e.next=7,p.querySnapping(c,{signal:t});case 7:return s=e.sent,(0,g.k_)(t),e.next=11,this._snappingElevationAligner.alignCandidates(s.candidates,t);case 11:return v=e.sent,(0,g.k_)(t),e.next=15,this._symbologySnappingFetcher.fetch(v,t);case 15:return f=e.sent,(0,g.k_)(t),d=0===f.length?v:[].concat((0,r.Z)(v),(0,r.Z)(f)),h=this._snappingElevationFilter.filter(c,d),w=this._getGroundElevation,e.abrupt("return",h.map((function(e){return(0,b.X)(e,w)})));case 19:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"_getGroundElevation",get:function(){return(0,b.g)(this.view)}}]),t}(s.Z);(0,c._)([(0,f.Cb)({constructOnly:!0})],Z.prototype,"layerSource",void 0),(0,c._)([(0,f.Cb)({constructOnly:!0})],Z.prototype,"view",void 0),(0,c._)([(0,f.Cb)()],Z.prototype,"_snappingElevationAligner",null),(0,c._)([(0,f.Cb)()],Z.prototype,"_snappingElevationFilter",null),(0,c._)([(0,f.Cb)()],Z.prototype,"_symbologySnappingFetcher",null),(0,c._)([(0,f.Cb)()],Z.prototype,"_layerView3D",void 0),(0,c._)([(0,f.Cb)()],Z.prototype,"_symbologySnappingSupported",null),(0,c._)([(0,f.Cb)()],Z.prototype,"_getGroundElevation",null),Z=(0,c._)([(0,d.j)("esri.views.interactive.snapping.featureSources.FeatureCollectionSnappingSource")],Z)},52824:function(e,n,t){t.d(n,{X:function(){return c},g:function(){return s}});var r=t(92026),i=t(71353),o=t(1700),a=t(97760),u=t(95905),p=t(36700);function l(e){var n=e.x,t=e.y,r=e.z;return(0,o.uc)((0,i.f)(n,t,null!==r&&void 0!==r?r:0))}function c(e,n){switch(e.type){case"edge":return e.draped?new a.k({edgeStart:l(e.start),edgeEnd:l(e.end),targetPoint:l(e.target),objectId:e.objectId,getGroundElevation:n}):new u.L({edgeStart:l(e.start),edgeEnd:l(e.end),targetPoint:l(e.target),objectId:e.objectId,isDraped:!1});case"vertex":return new p.x({targetPoint:l(e.target),objectId:e.objectId,isDraped:!1})}}function s(e){return(0,r.pC)(e)&&"3d"===e.type?function(n,t,r){return e.elevationProvider.getElevation(n,t,null!==r&&void 0!==r?r:0,e.spatialReference,"ground")}:function(){return null}}},61309:function(e,n,t){t.d(n,{n:function(){return p}});var r=t(15671),i=t(43144),o=t(60136),a=t(29388),u=t(11186),p=function(e){(0,o.Z)(t,e);var n=(0,a.Z)(t);function t(e,i,o){var a;return(0,r.Z)(this,t),(a=n.call(this,i,o)).point=e,a}return(0,i.Z)(t,[{key:"equals",value:function(e){return e instanceof t&&(0,u.k)(this.point,e.point)}}]),t}(t(55054).r)}}]);
//# sourceMappingURL=2137.4ae8856c.chunk.js.map