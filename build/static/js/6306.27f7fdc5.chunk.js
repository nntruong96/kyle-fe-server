"use strict";(self.webpackChunkcommonlands_web=self.webpackChunkcommonlands_web||[]).push([[6306],{96306:function(t,e,i){i.r(e),i.d(e,{default:function(){return J}});var r=i(29439),a=i(37762),o=i(60136),n=i(29388),s=i(43144),h=i(15671),l=i(27366),c=(i(59486),i(52639)),p=i(91505),u=i(92026),v=i(47898),d=i(94172),f=i(49861),_=(i(25243),i(63780),i(69912)),y=i(65156),g=i(376),G=i(69662),m=i(80885),b=i(29909),w=i(585),x=i(77577);function Z(t){var e,i=0,r=0,a=t.length,o=t[r];for(r=0;r<a-1;r++)i+=((e=t[r+1])[0]-o[0])*(e[1]+o[1]),o=e;return i>=0}function k(t,e,i,r){var o,n=[],s=(0,a.Z)(t);try{for(s.s();!(o=s.n()).done;){var h=o.value,l=h.slice(0);n.push(l);var c=e*(h[0]-r.x)-i*(h[1]-r.y)+r.x,p=i*(h[0]-r.x)+e*(h[1]-r.y)+r.y;l[0]=c,l[1]=p}}catch(u){s.e(u)}finally{s.f()}return n}function C(t,e,i){var r,o,n=t,s=n.hasM,h=n.hasZ,l=n.spatialReference,c=e*Math.PI/180,p=Math.cos(c),u=Math.sin(c);if("xmin"in t&&(i=null!==(r=i)&&void 0!==r?r:t.center,t=new m.Z({spatialReference:l,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})),"paths"in t){var v;i=null!==(v=i)&&void 0!==v?v:t.extent.center;var d,f=[],_=(0,a.Z)(t.paths);try{for(_.s();!(d=_.n()).done;){var y=d.value;f.push(k(y,p,u,i))}}catch(H){_.e(H)}finally{_.f()}return new b.Z({hasM:s,hasZ:h,spatialReference:l,paths:f})}if("rings"in t){var g;i=null!==(g=i)&&void 0!==g?g:t.extent.center;var G,C=[],S=(0,a.Z)(t.rings);try{for(S.s();!(G=S.n()).done;){var R=G.value,O=Z(R),I=k(R,p,u,i);Z(I)!==O&&I.reverse(),C.push(I)}}catch(H){S.e(H)}finally{S.f()}return new m.Z({hasM:s,hasZ:h,spatialReference:l,rings:C})}if("x"in t){var M;i=null!==(M=i)&&void 0!==M?M:t;var T=new w.Z({x:p*(t.x-i.x)-u*(t.y-i.y)+i.x,y:u*(t.x-i.x)+p*(t.y-i.y)+i.y,spatialReference:l});return null!=t.z&&(T.z=t.z),null!=t.m&&(T.m=t.m),T}return"points"in t?(i=null!==(o=i)&&void 0!==o?o:t.extent.center,new x.Z({hasM:s,hasZ:h,points:k(t.points,p,u,i),spatialReference:l})):null}var S=i(61459),R=i(16851),O=i(16072),I=i(20008),M=i(53503),T=i(74982),H=i(83089),z=i(70040),E=i(77560),P=i(7068),Y=i(12494),L=i(40524),A=i(59418),B=(0,s.Z)((function t(e,i,r,a){(0,h.Z)(this,t),this.graphics=e,this.mover=i,this.dx=r,this.dy=a,this.type="move-start"})),X=(0,s.Z)((function t(e,i,r,a){(0,h.Z)(this,t),this.graphics=e,this.mover=i,this.dx=r,this.dy=a,this.type="move"})),N=(0,s.Z)((function t(e,i,r,a){(0,h.Z)(this,t),this.graphics=e,this.mover=i,this.dx=r,this.dy=a,this.type="move-stop"})),j=(0,s.Z)((function t(e,i,r){(0,h.Z)(this,t),this.graphics=e,this.mover=i,this.angle=r,this.type="rotate-start"})),U=(0,s.Z)((function t(e,i,r){(0,h.Z)(this,t),this.graphics=e,this.mover=i,this.angle=r,this.type="rotate"})),V=(0,s.Z)((function t(e,i,r){(0,h.Z)(this,t),this.graphics=e,this.mover=i,this.angle=r,this.type="rotate-stop"})),D=(0,s.Z)((function t(e,i,r,a){(0,h.Z)(this,t),this.graphics=e,this.mover=i,this.xScale=r,this.yScale=a,this.type="scale-start"})),W=(0,s.Z)((function t(e,i,r,a){(0,h.Z)(this,t),this.graphics=e,this.mover=i,this.xScale=r,this.yScale=a,this.type="scale"})),F=(0,s.Z)((function t(e,i,r,a){(0,h.Z)(this,t),this.graphics=e,this.mover=i,this.xScale=r,this.yScale=a,this.type="scale-stop"})),Q=z.X.transformGraphics,q={centerIndicator:new O.Z({style:"cross",size:Q.center.size,color:Q.center.color}),fill:{default:new S.Z({color:Q.fill.color,outline:{color:Q.fill.outlineColor,join:"round",width:1}}),active:new S.Z({color:Q.fill.stagedColor,outline:{color:Q.fill.outlineColor,join:"round",style:"dash",width:1}})},handles:{default:new O.Z({style:"square",size:Q.vertex.size,color:Q.vertex.color,outline:{color:Q.vertex.outlineColor,width:1}}),hover:new O.Z({style:"square",size:Q.vertex.hoverSize,color:Q.vertex.hoverColor,outline:{color:Q.vertex.hoverOutlineColor,width:1}})},rotator:{default:new O.Z({style:"circle",size:Q.vertex.size,color:Q.vertex.color,outline:{color:Q.vertex.outlineColor,width:1}}),hover:new O.Z({style:"circle",size:Q.vertex.hoverSize,color:Q.vertex.hoverColor,outline:{color:Q.vertex.hoverOutlineColor,width:1}})},rotatorLine:new R.Z({color:Q.line.color,width:1})},$=function(t){(0,o.Z)(i,t);var e=(0,n.Z)(i);function i(t){var o;return(0,h.Z)(this,i),(o=e.call(this,t))._activeHandleGraphic=null,o._graphicAttributes={esriSketchTool:"box"},o._mover=null,o._centerGraphic=null,o._backgroundGraphic=null,o._vertexGraphics=[],o._rotateHandleGraphic=null,o._rotateGraphicOffset=20,o._angleOfRotation=0,o._rotateLineGraphic=null,o._startInfo=null,o._tooltip=null,o._totalDx=0,o._totalDy=0,o._xScale=1,o._yScale=1,o.type="box",o.callbacks={onMoveStart:function(){},onMove:function(){},onMoveStop:function(){},onScaleStart:function(){},onScale:function(){},onScaleStop:function(){},onRotateStart:function(){},onRotate:function(){},onRotateStop:function(){},onGraphicClick:function(){}},o.enableMovement=!0,o.enableRotation=!0,o.enableScaling=!0,o.graphics=[],o.highlightsEnabled=!0,o.layer=null,o.preserveAspectRatio=!1,o.showCenterGraphic=!0,o.symbols=q,o.tooltipOptions=new E.Z,o.view=null,o._getBounds=function(){var t=(0,y.Ue)();return function(e,i){e[0]=Number.POSITIVE_INFINITY,e[1]=Number.POSITIVE_INFINITY,e[2]=Number.NEGATIVE_INFINITY,e[3]=Number.NEGATIVE_INFINITY;var o,n=(0,a.Z)(i);try{for(n.s();!(o=n.n()).done;){var s=o.value;if(s){var h=void 0,l=void 0,c=void 0,p=void 0;if("point"===s.type)h=c=s.x,l=p=s.y;else if("multipoint"===s.type){var u=(0,G.nA)(s),v=(0,g.C6)(t,[u]),d=(0,r.Z)(v,4);h=d[0],l=d[1],c=d[2],p=d[3]}else if("extent"===s.type){var f=[s.xmin,s.ymin,s.xmax,s.ymax];h=f[0],l=f[1],c=f[2],p=f[3]}else{var _=(0,G.nA)(s),y=(0,g.C6)(t,_),m=(0,r.Z)(y,4);h=m[0],l=m[1],c=m[2],p=m[3]}e[0]=Math.min(h,e[0]),e[1]=Math.min(l,e[1]),e[2]=Math.max(c,e[2]),e[3]=Math.max(p,e[3])}}}catch(b){n.e(b)}finally{n.f()}return e}}(),o}return(0,s.Z)(i,[{key:"initialize",value:function(){var t=this,e=this.view;this._highlightHelper=new T.Z({view:e}),this._tooltip=new Y.u({view:e}),this._setup(),this.addHandles([(0,d.gx)((function(){return null===e||void 0===e?void 0:e.ready}),(function(){var e=t.layer,i=t.view;(0,H.p)(i,e)}),{once:!0,initial:!0}),(0,d.YP)((function(){return t.preserveAspectRatio}),(function(){t._activeHandleGraphic&&(t._scaleGraphic(t._activeHandleGraphic),t._updateGraphics(),t._updateTooltip(t._activeHandleGraphic))})),(0,d.YP)((function(){return null===e||void 0===e?void 0:e.scale}),(function(){t._updateRotateGraphic(),t._updateRotateLineGraphic()})),(0,d.YP)((function(){return t.graphics}),(function(){return t.refresh()})),(0,d.YP)((function(){return t.layer}),(function(e,i){i&&t._resetGraphics(i),t.refresh()})),(0,d.YP)((function(){return t.highlightsEnabled}),(function(){var e;null!==(e=t._highlightHelper)&&void 0!==e&&e.removeAll(),t._setUpHighlights()})),(0,d.YP)((function(){return t.tooltipOptions.enabled}),(function(e){t._tooltip=e?new Y.u({view:t.view}):(0,u.SC)(t._tooltip)}),d.tX),this.on("move-start",(function(e){var i,r;return null===(i=t.callbacks)||void 0===i||null===(r=i.onMoveStart)||void 0===r?void 0:r.call(i,e)})),this.on("move",(function(e){var i,r;return null===(i=t.callbacks)||void 0===i||null===(r=i.onMove)||void 0===r?void 0:r.call(i,e)})),this.on("move-stop",(function(e){var i,r;return null===(i=t.callbacks)||void 0===i||null===(r=i.onMoveStop)||void 0===r?void 0:r.call(i,e)})),this.on("rotate-start",(function(e){var i,r;return null===(i=t.callbacks)||void 0===i||null===(r=i.onRotateStart)||void 0===r?void 0:r.call(i,e)})),this.on("rotate",(function(e){var i,r;return null===(i=t.callbacks)||void 0===i||null===(r=i.onRotate)||void 0===r?void 0:r.call(i,e)})),this.on("rotate-stop",(function(e){var i,r;return null===(i=t.callbacks)||void 0===i||null===(r=i.onRotateStop)||void 0===r?void 0:r.call(i,e)})),this.on("scale-start",(function(e){var i,r;return null===(i=t.callbacks)||void 0===i||null===(r=i.onScaleStart)||void 0===r?void 0:r.call(i,e)})),this.on("scale",(function(e){var i,r;return null===(i=t.callbacks)||void 0===i||null===(r=i.onScale)||void 0===r?void 0:r.call(i,e)})),this.on("scale-stop",(function(e){var i,r;return null===(i=t.callbacks)||void 0===i||null===(r=i.onScaleStop)||void 0===r?void 0:r.call(i,e)}))])}},{key:"destroy",value:function(){this._reset(),this._tooltip=(0,u.SC)(this._tooltip)}},{key:"state",get:function(){var t,e,i=null!==(t=null===(e=this.view)||void 0===e?void 0:e.ready)&&void 0!==t&&t,r=this.graphics.length&&this.layer;return i&&r?"active":i?"ready":"disabled"}},{key:"isUIGraphic",value:function(t){return this._vertexGraphics.includes(t)||t===this._backgroundGraphic||t===this._centerGraphic||t===this._rotateHandleGraphic||t===this._rotateLineGraphic}},{key:"move",value:function(t,e){if(this._mover&&this.graphics.length){var i,r=(0,a.Z)(this.graphics);try{for(r.s();!(i=r.n()).done;){var o=i.value,n=o.geometry,s=(0,I.e7)(n,t,e,this.view);o.geometry=s}}catch(h){r.e(h)}finally{r.f()}this.refresh(),this.emit("move-stop",new N(this.graphics,null,t,e))}}},{key:"scale",value:function(t,e){if(this._mover&&this.graphics.length){var i,r=(0,a.Z)(this.graphics);try{for(r.s();!(i=r.n()).done;){var o=i.value,n=o.geometry,s=(0,I.bA)(n,t,e);o.geometry=s}}catch(h){r.e(h)}finally{r.f()}this.refresh(),this.emit("scale-stop",new F(this.graphics,null,t,e))}}},{key:"rotate",value:function(t,e){if(this._mover&&this.graphics.length){if(!e){var i=this._vertexGraphics[1].geometry.x,r=this._vertexGraphics[3].geometry.y;e=new w.Z(i,r,this.view.spatialReference)}var o,n=(0,a.Z)(this.graphics);try{for(n.s();!(o=n.n()).done;){var s=o.value,h=C(s.geometry,t,e);s.geometry=h}}catch(l){n.e(l)}finally{n.f()}this.refresh(),this.emit("rotate-stop",new V(this.graphics,null,t))}}},{key:"refresh",value:function(){this._reset(),this._setup()}},{key:"reset",value:function(){this.graphics=[]}},{key:"_setup",value:function(){"active"===this.state&&(this._setUpHighlights(),this._setupGraphics(),this._setupMover(),this._updateGraphics())}},{key:"_reset",value:function(){this._highlightHelper.removeAll(),this._resetGraphicStateVars(),this._resetGraphics(),this._updateTooltip(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}},{key:"_resetGraphicStateVars",value:function(){this._startInfo=null,this._activeHandleGraphic=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this._angleOfRotation=0}},{key:"_resetGraphics",value:function(t){(t=t||this.layer)&&(t.removeMany(this._vertexGraphics),t.remove(this._backgroundGraphic),t.remove(this._centerGraphic),t.remove(this._rotateHandleGraphic),t.remove(this._rotateLineGraphic)),this._vertexGraphics=[],this._backgroundGraphic=null,this._centerGraphic=null,this._rotateHandleGraphic=null,this._rotateLineGraphic=null}},{key:"_setupMover",value:function(){var t=this,e=[];this.enableScaling&&(e=e.concat(this._vertexGraphics)),this.enableMovement&&(e=e.concat(this.graphics,this._backgroundGraphic)),this.enableRotation&&e.push(this._rotateHandleGraphic),this.showCenterGraphic&&e.push(this._centerGraphic),this._mover=new M.default({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,view:this.view,graphics:e,callbacks:{onGraphicClick:function(e){return t._onGraphicClickCallback(e)},onGraphicMoveStart:function(e){return t._onGraphicMoveStartCallback(e)},onGraphicMove:function(e){return t._onGraphicMoveCallback(e)},onGraphicMoveStop:function(e){return t._onGraphicMoveStopCallback(e)},onGraphicPointerOver:function(e){return t._onGraphicPointerOverCallback(e)},onGraphicPointerOut:function(e){return t._onGraphicPointerOutCallback(e)}}})}},{key:"_getStartInfo",value:function(t){var e=this._getBoxBounds((0,y.Ue)()),i=(0,r.Z)(e,4),a=i[0],o=i[1],n=i[2],s=i[3],h=Math.abs(n-a),l=Math.abs(s-o),c=(n+a)/2,p=(s+o)/2,u=t.geometry;return{width:h,height:l,centerX:c,centerY:p,startX:u.x,startY:u.y,graphicInfos:this._getGraphicInfos(),box:this._backgroundGraphic.geometry,rotate:this._rotateHandleGraphic.geometry}}},{key:"_getGraphicInfos",value:function(){var t=this;return this.graphics.map((function(e){return t._getGraphicInfo(e)}))}},{key:"_getGraphicInfo",value:function(t){var e=t.geometry,i=this._getBounds((0,y.Ue)(),[e]),a=(0,r.Z)(i,4),o=a[0],n=a[1],s=a[2],h=a[3];return{width:Math.abs(s-o),height:Math.abs(h-n),centerX:(s+o)/2,centerY:(h+n)/2,geometry:e}}},{key:"_onGraphicClickCallback",value:function(t){t.viewEvent.stopPropagation(),this.emit("graphic-click",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t)}},{key:"_onGraphicMoveStartCallback",value:function(t){var e=this._angleOfRotation,i=this._xScale,r=this._yScale,a=this._backgroundGraphic,o=this._vertexGraphics,n=this._rotateHandleGraphic,s=this.symbols,h=t.graphic;this._resetGraphicStateVars(),this._hideGraphicsBeforeUpdate(),a.symbol=s.fill.active,this._startInfo=this._getStartInfo(h),this._updateTooltip(h,t.viewEvent),h===n?(this.view.cursor="grabbing",this.emit("rotate-start",new j(this.graphics,h,e))):o.includes(h)?(this._activeHandleGraphic=h,this.emit("scale-start",new D(this.graphics,h,i,r))):this.emit("move-start",new B(this.graphics,h,t.dx,t.dy))}},{key:"_onGraphicMoveCallback",value:function(t){var e=t.graphic;if(this._startInfo)if(this._vertexGraphics.includes(e))this._scaleGraphic(e),this._updateTooltip(e,t.viewEvent),this.emit("scale",new W(this.graphics,e,this._xScale,this._yScale));else if(e===this._rotateHandleGraphic)this._rotateGraphic(e),this._updateTooltip(e,t.viewEvent),this.emit("rotate",new U(this.graphics,e,this._angleOfRotation));else{var i=t.dx,r=t.dy;this._totalDx+=i,this._totalDy+=r,this._moveGraphic(e,i,r),this._updateTooltip(e,t.viewEvent),this.emit("move",new X(this.graphics,e,i,r))}}},{key:"_onGraphicMoveStopCallback",value:function(t){var e=t.graphic;if(this._startInfo){var i=this._angleOfRotation,r=this._totalDx,a=this._totalDy,o=this._xScale,n=this._yScale,s=this._vertexGraphics,h=this._rotateHandleGraphic;this.refresh(),e===h?(this.view.cursor="pointer",this.emit("rotate-stop",new V(this.graphics,e,i))):s.includes(e)?this.emit("scale-stop",new F(this.graphics,e,o,n)):this.emit("move-stop",new N(this.graphics,e,r,a))}else this.refresh()}},{key:"_onGraphicPointerOverCallback",value:function(t){var e=this._backgroundGraphic,i=this._vertexGraphics,r=this.graphics,a=this._rotateHandleGraphic,o=this.symbols,n=this.view,s=t.graphic;if(s===a)return a.symbol=o.rotator.hover,n.cursor="pointer",void this._updateTooltip(s);if(r.includes(s)||s===e)n.cursor="move";else if(i.includes(s)){this._updateTooltip(s),t.graphic.symbol=o.handles.hover;var h,l=n.rotation,c=t.index;switch(c<8&&(l>=0&&l<45?c%=8:c=l>=45&&l<90?(c+1)%8:l>=90&&l<135?(c+2)%8:l>=135&&l<180?(c+3)%8:l>=180&&l<225?(c+4)%8:l>=225&&l<270?(c+5)%8:l>=270&&l<315?(c+6)%8:(c+7)%8),c){case 0:case 4:h="nwse-resize";break;case 1:case 5:h="ns-resize";break;case 2:case 6:h="nesw-resize";break;case 3:case 7:h="ew-resize";break;default:h="pointer"}n.cursor=h}else n.cursor="pointer"}},{key:"_onGraphicPointerOutCallback",value:function(t){var e=this._vertexGraphics,i=this._rotateHandleGraphic,r=this.symbols,a=this.view;t.graphic===i?i.symbol=r.rotator.default:e.includes(t.graphic)&&(t.graphic.symbol=r.handles.default),a.cursor="default",this._updateTooltip()}},{key:"_scaleGraphic",value:function(t){var e,i,r=this._startInfo,o=this._vertexGraphics,n=this.preserveAspectRatio,s=this.view,h=r.centerX,l=r.centerY,c=r.startX,p=r.startY,u=s.state,v=u.resolution,d=u.transform,f=o.indexOf(t);1!==f&&5!==f||this._updateX(t,h),3!==f&&7!==f||this._updateY(t,l);var _=t.geometry,y=_.x,g=_.y,G=d[0]*y+d[2]*g+d[4],m=d[1]*y+d[3]*g+d[5],b=null!==(e=null===(i=r.graphicInfos)||void 0===i?void 0:i.map((function(t){return t.geometry})))&&void 0!==e?e:[];if(n){var x=d[0]*h+d[2]*l+d[4],Z=d[1]*h+d[3]*l+d[5],k=d[0]*c+d[2]*p+d[4],C=d[1]*c+d[3]*p+d[5];this._xScale=this._yScale=(0,I.Ru)(x,Z,k,C,G,m);var S,R=(0,a.Z)(b);try{for(R.s();!(S=R.n()).done;){var O=S.value,M=b.indexOf(O);this.graphics[M].geometry=(0,I.bA)(O,this._xScale,this._yScale,[h,l])}}catch(K){R.e(K)}finally{R.f()}this._updateBackgroundGraphic()}else{var T=r.width,H=r.height,z=y-c,E=p-g;if(1===f||5===f?z=0:3!==f&&7!==f||(E=0),0===z&&0===E)return;var P=T+(c>h?z:-1*z),Y=H+(p<l?E:-1*E),L=h+z/2,A=l+E/2;this._xScale=P/T||1,this._yScale=Y/H||1,1===f||5===f?this._xScale=1:3!==f&&7!==f||(this._yScale=1);var B=(L-h)/v,X=(A-l)/v,N=(0,I.bA)(r.box,this._xScale,this._yScale);this._backgroundGraphic.geometry=(0,I.e7)(N,B,X,s,!0);var j,U=this._getGraphicInfo(this._backgroundGraphic),V=U.centerX,D=U.centerY,W=(V-h)/v,F=-1*(D-l)/v,Q=(0,a.Z)(b);try{for(Q.s();!(j=Q.n()).done;){var q=j.value,$=b.indexOf(q),J=(0,I.bA)(q,this._xScale,this._yScale,[h,l]);this.graphics[$].geometry=(0,I.e7)(J,W,F,s,!0)}}catch(K){Q.e(K)}finally{Q.f()}this._centerGraphic.geometry=new w.Z(V,D,s.spatialReference)}}},{key:"_rotateGraphic",value:function(t){var e,i,r=this._startInfo,o=r.centerX,n=r.centerY,s=r.startX,h=r.startY,l=r.box,c=r.rotate,p=this.view.spatialReference,u=new w.Z(s,h,p),v=new w.Z(o,n,p),d=t.geometry;this._angleOfRotation=(0,I.cM)(u,d,v);var f,_=null!==(e=null===(i=this._startInfo.graphicInfos)||void 0===i?void 0:i.map((function(t){return t.geometry})))&&void 0!==e?e:[],y=(0,a.Z)(_);try{for(y.s();!(f=y.n()).done;){var g=f.value,G=_.indexOf(g),m=C(g,this._angleOfRotation,v);this.graphics[G].geometry=m}}catch(b){y.e(b)}finally{y.f()}this._backgroundGraphic.geometry=C(l,this._angleOfRotation,v),this._rotateHandleGraphic.geometry=C(c,this._angleOfRotation,v)}},{key:"_moveGraphic",value:function(t,e,i){if(this.graphics.includes(t)){var r=this._backgroundGraphic.geometry;this._backgroundGraphic.geometry=(0,I.e7)(r,e,i,this.view);var o,n=(0,a.Z)(this.graphics);try{for(n.s();!(o=n.n()).done;){var s=o.value;s!==t&&(s.geometry=(0,I.e7)(s.geometry,e,i,this.view))}}catch(u){n.e(u)}finally{n.f()}}else if(t===this._centerGraphic){var h=this._backgroundGraphic.geometry;this._backgroundGraphic.geometry=(0,I.e7)(h,e,i,this.view)}if(t===this._backgroundGraphic||t===this._centerGraphic){var l,c=(0,a.Z)(this.graphics);try{for(c.s();!(l=c.n()).done;){var p=l.value;p.geometry=(0,I.e7)(p.geometry,e,i,this.view)}}catch(u){c.e(u)}finally{c.f()}}}},{key:"_setUpHighlights",value:function(){var t;this.highlightsEnabled&&this.graphics.length&&(null===(t=this._highlightHelper)||void 0===t||t.add(this.graphics))}},{key:"_setupGraphics",value:function(){var t=this._graphicAttributes,e=this.symbols;this._centerGraphic=new c.Z(null,e.centerIndicator,t),this.showCenterGraphic&&this.layer.add(this._centerGraphic),this._backgroundGraphic=new c.Z(null,e.fill.default,t),this.layer.add(this._backgroundGraphic),this._rotateLineGraphic=new c.Z(null,e.rotatorLine,t),this._rotateHandleGraphic=new c.Z(null,e.rotator.default,t),this.enableRotation&&!this._hasExtentGraphic()&&this.layer.addMany([this._rotateLineGraphic,this._rotateHandleGraphic]);for(var i=0;i<8;i++)this._vertexGraphics.push(new c.Z(null,e.handles.default,t));this.enableScaling&&this.layer.addMany(this._vertexGraphics)}},{key:"_updateGraphics",value:function(){this._updateBackgroundGraphic(),this._updateHandleGraphics(),this._updateCenterGraphic(),this._updateRotateGraphic(),this._updateRotateLineGraphic()}},{key:"_hideGraphicsBeforeUpdate",value:function(){this._centerGraphic.visible=!1,this._rotateHandleGraphic.visible=!1,this._rotateLineGraphic.visible=!1,this._vertexGraphics.forEach((function(t){return t.visible=!1}))}},{key:"_updateHandleGraphics",value:function(){var t=this,e=this._getCoordinates(!0);this._vertexGraphics.forEach((function(i,a){var o=(0,r.Z)(e[a],2),n=o[0],s=o[1];t._updateXY(i,n,s)}))}},{key:"_updateBackgroundGraphic",value:function(){var t=this._getCoordinates();this._backgroundGraphic.geometry=new m.Z({rings:t,spatialReference:this.view.spatialReference})}},{key:"_updateCenterGraphic",value:function(){var t=this._getBoxBounds((0,y.Ue)()),e=(0,r.Z)(t,4),i=e[0],a=e[1],o=(e[2]+i)/2,n=(e[3]+a)/2;this._centerGraphic.geometry=new w.Z(o,n,this.view.spatialReference)}},{key:"_updateRotateGraphic",value:function(){if(this._vertexGraphics.length){var t=this._vertexGraphics[1].geometry,e=t.x,i=t.y+this.view.state.resolution*this._rotateGraphicOffset;this._rotateHandleGraphic.geometry=new w.Z(e,i,this.view.spatialReference)}}},{key:"_updateRotateLineGraphic",value:function(){if(this._vertexGraphics.length&&this._rotateHandleGraphic&&this._rotateHandleGraphic.geometry){var t=this._vertexGraphics[1].geometry,e=this._rotateHandleGraphic.geometry;this._rotateLineGraphic.geometry=new b.Z({paths:[[t.x,t.y],[e.x,e.y]],spatialReference:this.view.spatialReference})}}},{key:"_updateXY",value:function(t,e,i){t.geometry=new w.Z(e,i,this.view.spatialReference)}},{key:"_updateX",value:function(t,e){var i=t.geometry.y;t.geometry=new w.Z(e,i,this.view.spatialReference)}},{key:"_updateY",value:function(t,e){var i=t.geometry.x;t.geometry=new w.Z(i,e,this.view.spatialReference)}},{key:"_hasExtentGraphic",value:function(){return this.graphics.some((function(t){return t&&(0,u.pC)(t.geometry)&&"extent"===t.geometry.type}))}},{key:"_getBoxBounds",value:function(t){var e=this.graphics.map((function(t){return t.geometry}));return this._getBounds(t,e)}},{key:"_getCoordinates",value:function(t){var e=this._getBoxBounds((0,y.Ue)()),i=(0,r.Z)(e,4),a=i[0],o=i[1],n=i[2],s=i[3];if(t){var h=(a+n)/2,l=(s+o)/2;return[[a,s],[h,s],[n,s],[n,l],[n,o],[h,o],[a,o],[a,l]]}return[[a,s],[n,s],[n,o],[a,o]]}},{key:"_updateTooltip",value:function(t,e){if(!(0,u.Wi)(this._tooltip))if(t){var i=this._backgroundGraphic,r=this.graphics,a=this._vertexGraphics;t===this._rotateHandleGraphic?this._updateRotateTooltip():a.includes(t)?this._updateScaleTooltip():(r.includes(t)||t===i)&&this._updateMoveTooltip(e)}else this._tooltip.clear()}},{key:"_updateRotateTooltip",value:function(){(0,u.Wi)(this._tooltip)||(this._tooltip.info=new P.c({tooltipOptions:this.tooltipOptions,angle:-this._angleOfRotation}))}},{key:"_updateScaleTooltip",value:function(){var t=this._tooltip,e=this._xScale,i=this._yScale,r=this.tooltipOptions,a=this.view;if(!(0,u.Wi)(t)){var o=a.spatialReference,n=this._getCoordinates(),s=new w.Z(n[0][0],n[0][1],o),h=new w.Z(n[1][0],n[1][1],o),l=new w.Z(n[2][0],n[2][1],o),c=(0,A.Qw)(s,h),p=(0,A.Qw)(h,l);if(!(0,u.Wi)(c)&&!(0,u.Wi)(p)){var v=Math.abs(e),d=Math.abs(i);t.info=new P.p({tooltipOptions:r,xScale:v,yScale:d,xSize:c,ySize:p})}}}},{key:"_updateMoveTooltip",value:function(t){var e=this._tooltip,i=this.tooltipOptions,r=this.view;if(!(0,u.Wi)(e)){var a=new L.$E({tooltipOptions:i});if(t){var o=t.origin,n=o.x,s=o.y,h=r.toMap(t),l=r.toMap({x:n,y:s}),c=(0,A.Qw)(l,h);a.distance=(0,u.pC)(c)?c:v.yP}e.info=a}}}]),i}(p.Z.EventedAccessor);(0,l._)([(0,f.Cb)()],$.prototype,"_tooltip",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],$.prototype,"type",void 0),(0,l._)([(0,f.Cb)()],$.prototype,"callbacks",void 0),(0,l._)([(0,f.Cb)()],$.prototype,"enableMovement",void 0),(0,l._)([(0,f.Cb)()],$.prototype,"enableRotation",void 0),(0,l._)([(0,f.Cb)()],$.prototype,"enableScaling",void 0),(0,l._)([(0,f.Cb)()],$.prototype,"graphics",void 0),(0,l._)([(0,f.Cb)()],$.prototype,"highlightsEnabled",void 0),(0,l._)([(0,f.Cb)()],$.prototype,"layer",void 0),(0,l._)([(0,f.Cb)()],$.prototype,"preserveAspectRatio",void 0),(0,l._)([(0,f.Cb)()],$.prototype,"showCenterGraphic",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],$.prototype,"state",null),(0,l._)([(0,f.Cb)({value:q,cast:function(t){var e=t||{},i=e.centerIndicator,r=void 0===i?q.centerIndicator:i,a=e.fill,o=void 0===a?q.fill:a,n=e.handles,s=void 0===n?q.handles:n,h=e.rotator,l=void 0===h?q.rotator:h,c=e.rotatorLine;return{centerIndicator:r,fill:o,handles:s,rotator:l,rotatorLine:void 0===c?q.rotatorLine:c}}})],$.prototype,"symbols",void 0),(0,l._)([(0,f.Cb)({type:E.Z})],$.prototype,"tooltipOptions",void 0),(0,l._)([(0,f.Cb)({constructOnly:!0})],$.prototype,"view",void 0);var J=$=(0,l._)([(0,_.j)("esri.views.draw.support.Box")],$)},70040:function(t,e,i){i.d(e,{O:function(){return n},X:function(){return v}});var r=i(43144),a=i(15671),o=i(51995),n={main:new o.Z([255,127,0]),selected:new o.Z([255,255,255]),outline:new o.Z([0,0,0,.5]),selectedOutline:new o.Z([255,255,255]),hoverOutline:new o.Z([255,255,255]),secondary:new o.Z([255,255,255]),secondaryOutline:new o.Z([100,100,100]),transparent:new o.Z([0,0,0,0])};function s(t,e){if(e)for(var i in e)t[i]=e[i]}var h=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.size=8,this.hoverSize=10,this.color=n.main,this.hoverColor=n.main,this.outlineColor=n.outline,this.hoverOutlineColor=n.hoverOutline,s(this,e)})),l=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.color=n.secondary,this.hoverColor=n.main,s(this,e)})),c=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.color=n.transparent,this.hoverColor=n.transparent,this.outlineColor=n.main,this.hoverOutlineColor=n.main,this.stagedColor=n.transparent,this.stagedOutlineColor=n.secondary,s(this,e)})),p=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.vertex=new h,this.midpoint=new h({color:n.secondary,outlineColor:n.secondaryOutline,size:6}),this.selected=new h({color:n.selected,hoverColor:n.selected,hoverOutlineColor:n.hoverOutline}),s(this,e)})),u=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.center=new h({color:n.secondaryOutline}),this.fill=new c,this.line=new l,this.vertex=new h({color:n.selected,outlineColor:n.main,hoverColor:n.selected,hoverOutlineColor:n.secondaryOutline}),s(this,e)})),v=new((0,r.Z)((function t(e){(0,a.Z)(this,t),this.reshapeGraphics=new p,this.transformGraphics=new u,s(this,e)})))},7068:function(t,e,i){i.d(e,{c:function(){return u},p:function(){return v}});var r=i(43144),a=i(15671),o=i(60136),n=i(29388),s=i(27366),h=i(47898),l=i(49861),c=i(69912),p=i(4943),u=function(t){(0,o.Z)(i,t);var e=(0,n.Z)(i);function i(t){var r;return(0,a.Z)(this,i),(r=e.call(this,t)).type="extent-rotate",r.angle=0,r}return(0,r.Z)(i)}(p.h);(0,s._)([(0,l.Cb)()],u.prototype,"type",void 0),(0,s._)([(0,l.Cb)()],u.prototype,"angle",void 0),u=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.ExtentRotateTooltipInfo")],u);var v=function(t){(0,o.Z)(i,t);var e=(0,n.Z)(i);function i(t){var r;return(0,a.Z)(this,i),(r=e.call(this,t)).type="extent-scale",r.xScale=0,r.yScale=0,r.xSize=h.yP,r.ySize=h.yP,r}return(0,r.Z)(i)}(p.h);(0,s._)([(0,l.Cb)()],v.prototype,"type",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"xScale",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"yScale",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"xSize",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"ySize",void 0),v=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.ExtentScaleTooltipInfo")],v)},40524:function(t,e,i){i.d(e,{$E:function(){return u},QW:function(){return v},c1:function(){return y},in:function(){return d},j:function(){return _},nk:function(){return f}});var r=i(43144),a=i(15671),o=i(60136),n=i(29388),s=i(27366),h=i(47898),l=i(49861),c=i(69912),p=i(4943),u=function(t){(0,o.Z)(i,t);var e=(0,n.Z)(i);function i(t){var r;return(0,a.Z)(this,i),(r=e.call(this,t)).type="translate-graphic",r.distance=h.yP,r}return(0,r.Z)(i)}(p.h);(0,s._)([(0,l.Cb)()],u.prototype,"type",void 0),(0,s._)([(0,l.Cb)()],u.prototype,"distance",void 0),u=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.TranslateGraphicTooltipInfo")],u);var v=function(t){(0,o.Z)(i,t);var e=(0,n.Z)(i);function i(t){var r;return(0,a.Z)(this,i),(r=e.call(this,t)).type="translate-graphic-z",r.distance=h.yP,r}return(0,r.Z)(i)}(p.h);(0,s._)([(0,l.Cb)()],v.prototype,"type",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"distance",void 0),v=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.TranslateGraphicZTooltipInfo")],v);var d=function(t){(0,o.Z)(i,t);var e=(0,n.Z)(i);function i(t){var r;return(0,a.Z)(this,i),(r=e.call(this,t)).type="translate-graphic-xy",r.distance=h.yP,r}return(0,r.Z)(i)}(p.h);(0,s._)([(0,l.Cb)()],d.prototype,"type",void 0),(0,s._)([(0,l.Cb)()],d.prototype,"distance",void 0),d=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.TranslateGraphicXYTooltipInfo")],d);var f=function(t){(0,o.Z)(i,t);var e=(0,n.Z)(i);function i(t){var r;return(0,a.Z)(this,i),(r=e.call(this,t)).type="translate-vertex",r.distance=h.yP,r.elevation=null,r.area=null,r.totalLength=null,r}return(0,r.Z)(i)}(p.h);(0,s._)([(0,l.Cb)()],f.prototype,"type",void 0),(0,s._)([(0,l.Cb)()],f.prototype,"distance",void 0),(0,s._)([(0,l.Cb)()],f.prototype,"elevation",void 0),(0,s._)([(0,l.Cb)()],f.prototype,"area",void 0),(0,s._)([(0,l.Cb)()],f.prototype,"totalLength",void 0),f=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.TranslateVertexTooltipInfo")],f);var _=function(t){(0,o.Z)(i,t);var e=(0,n.Z)(i);function i(t){var r;return(0,a.Z)(this,i),(r=e.call(this,t)).type="translate-vertex-z",r.distance=h.yP,r.elevation=null,r}return(0,r.Z)(i)}(p.h);(0,s._)([(0,l.Cb)()],_.prototype,"type",void 0),(0,s._)([(0,l.Cb)()],_.prototype,"distance",void 0),(0,s._)([(0,l.Cb)()],_.prototype,"elevation",void 0),_=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.TranslateVertexZTooltipInfo")],_);var y=function(t){(0,o.Z)(i,t);var e=(0,n.Z)(i);function i(t){var r;return(0,a.Z)(this,i),(r=e.call(this,t)).type="translate-vertex-xy",r.distance=h.yP,r.elevation=null,r.area=null,r.totalLength=null,r}return(0,r.Z)(i)}(p.h);(0,s._)([(0,l.Cb)()],y.prototype,"type",void 0),(0,s._)([(0,l.Cb)()],y.prototype,"distance",void 0),(0,s._)([(0,l.Cb)()],y.prototype,"elevation",void 0),(0,s._)([(0,l.Cb)()],y.prototype,"area",void 0),(0,s._)([(0,l.Cb)()],y.prototype,"totalLength",void 0),y=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.TranslateVertexXYTooltipInfo")],y)}}]);
//# sourceMappingURL=6306.27f7fdc5.chunk.js.map