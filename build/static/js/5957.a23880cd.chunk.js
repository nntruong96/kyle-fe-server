"use strict";(self.webpackChunkcommonlands_web=self.webpackChunkcommonlands_web||[]).push([[5957],{35888:function(e,t,r){r.d(t,{d:function(){return i}});var n=r(16889),a=r(72838);function i(e,t,r){var i,c=Array.isArray(e),f=c?e.length/t:e.byteLength/(4*t),p=c?e:new Uint32Array(e,0,f*t),v=null!==(i=null===r||void 0===r?void 0:r.minReduction)&&void 0!==i?i:0,h=(null===r||void 0===r?void 0:r.originalIndices)||null,g=h?h.length:0,d=(null===r||void 0===r?void 0:r.componentOffsets)||null,m=0;if(d)for(var y=0;y<d.length-1;y++){var x=d[y+1]-d[y];x>m&&(m=x)}else m=f;var w=Math.floor(1.1*m)+1;(null==u||u.length<2*w)&&(u=new Uint32Array((0,n.Sf)(2*w)));for(var b=0;b<2*w;b++)u[b]=0;for(var A=0,C=!!d&&!!h,Z=C?g:f,k=(0,a.$z)(f/3),R=new Uint32Array(g),M=1.96,F=0!==v?Math.ceil(4*M*M/(v*v)*v*(1-v)):Z,L=1,E=d?d[1]:Z,O=0;O<Z;O++){if(O===F){var P=1-A/O;if(P+M*Math.sqrt(P*(1-P)/O)<v)return null;F*=2}if(O===E){for(var I=0;I<2*w;I++)u[I]=0;if(h)for(var U=d[L-1];U<d[L];U++)R[U]=k[h[U]];E=d[++L]}for(var S=C?h[O]:O,_=S*t,z=l(p,_,t),T=z%w,D=A;0!==u[2*T+1];){if(u[2*T]===z){var B=u[2*T+1]-1;if(o(p,_,B*t,t)){D=k[B];break}}++T>=w&&(T-=w)}D===A&&(u[2*T]=z,u[2*T+1]=S+1,A++),k[S]=D}if(0!==v&&1-A/f<v)return null;if(C){for(var N=d[L-1];N<R.length;N++)R[N]=k[h[N]];k=(0,a.mi)(R)}var j=c?new Array(A):new Uint32Array(A*t);A=0;for(var W=0;W<Z;W++)k[W]===A&&(s(p,(C?h[W]:W)*t,j,A*t,t),A++);if(h&&!C){for(var G=new Uint32Array(g),Y=0;Y<G.length;Y++)G[Y]=k[h[Y]];k=(0,a.mi)(G)}return{buffer:Array.isArray(j)?j:j.buffer,indices:k,uniqueCount:A}}function o(e,t,r,n){for(var a=0;a<n;a++)if(e[t+a]!==e[r+a])return!1;return!0}function s(e,t,r,n,a){for(var i=0;i<a;i++)r[n+i]=e[t+i]}function l(e,t,r){for(var n=0,a=0;a<r;a++)n=(n=e[t+a]+n|0)+(n<<11)+(n>>>2)|0;return n>>>0}var u=null},91320:function(e,t,r){r.d(t,{Mk:function(){return f},ZI:function(){return n},bT:function(){return c}});var n,a,i=r(37762),o=r(79347),s=r(69662),l=r(35888),u=r(88699);function c(e){var t,r=f(e.rings,e.hasZ,n.CCW_IS_HOLE),a=new Array,s=0,c=0,p=(0,i.Z)(r.polygons);try{var v=function(){var e=t.value,n=e.count,i=e.index,l=(0,u.Rq)(r.position,3*i,3*n),f=e.holeIndices.map((function(e){return e-i})),p=new Uint32Array((0,o.e)(l,f,3));a.push({position:l,faces:p}),s+=l.length,c+=p.length};for(p.s();!(t=p.n()).done;)v()}catch(d){p.e(d)}finally{p.f()}var h=function(e,t,r){if(1===e.length)return e[0];var n,a=(0,u.bg)(t),o=new Uint32Array(r),s=0,l=0,c=0,f=(0,i.Z)(e);try{for(f.s();!(n=f.n()).done;){for(var p=n.value,v=0;v<p.position.length;v++)a[s++]=p.position[v];for(var h=0;h<p.faces.length;h++)o[l++]=p.faces[h]+c;c=s/3}}catch(d){f.e(d)}finally{f.f()}return{position:a,faces:o}}(a,s,c),g=Array.isArray(h.position)?(0,l.d)(h.position,3,{originalIndices:h.faces}):(0,l.d)(h.position.buffer,6,{originalIndices:h.faces});return h.position=new Float64Array(g.buffer),h.faces=g.indices,h}function f(e,t,r){for(var a=e.length,i=new Array(a),o=new Array(a),s=new Array(a),l=0,c=0,f=0,h=0,g=0;g<a;++g)h+=e[g].length;for(var d=(0,u.bg)(3*h),m=0,y=a-1;y>=0;y--){var x=e[y],w=r===n.CCW_IS_HOLE&&v(x);if(w&&1!==a)i[l++]=x;else{for(var b=x.length,A=0;A<l;++A)b+=i[A].length;var C={index:m,pathLengths:new Array(l+1),count:b,holeIndices:new Array(l)};C.pathLengths[0]=x.length,x.length>0&&(s[f++]={index:m,count:x.length}),m=w?p(x,x.length-1,-1,d,m,x.length,t):p(x,0,1,d,m,x.length,t);for(var Z=0;Z<l;++Z){var k=i[Z];C.holeIndices[Z]=m,C.pathLengths[Z+1]=k.length,k.length>0&&(s[f++]={index:m,count:k.length}),m=p(k,0,1,d,m,k.length,t)}l=0,C.count>0&&(o[c++]=C)}}for(var R=0;R<l;++R){var M=i[R];M.length>0&&(s[f++]={index:m,count:M.length}),m=p(M,0,1,d,m,M.length,t)}return o.length=c,s.length=f,{position:d,polygons:o,outlines:s}}function p(e,t,r,n,a,i,o){a*=3;for(var s=0;s<i;++s){var l=e[t];n[a++]=l[0],n[a++]=l[1],n[a++]=o?l[2]:0,t+=r}return a/3}function v(e){return!(0,s.bu)(e,!1,!1)}(a=n||(n={}))[a.NONE=0]="NONE",a[a.CCW_IS_HOLE=1]="CCW_IS_HOLE"},45957:function(e,t,r){r.r(t),r.d(t,{meshFeatureSetFromJSON:function(){return je}});var n=r(37762),a=r(52639),i=r(92026),o=r(53866),s=r(1413),l=r(74165),u=r(15861),c=r(15671),f=r(43144),p=r(60136),v=r(29388),h=r(27366),g=r(10064),d=r(41691),m=r(54472),y=r(32718),x=r(67426),w=r(66978),b=r(94172),A=r(49861),C=(r(25243),r(63780),r(69912)),Z=r(71353),k=r(32238),R=r(585),M=r(80885),F=r(45238),L=r(64995),E=r(76046),O=r(27474),P=r(91320),I=r(79803),U=r(26548),S=r(57898),_=y.Z.getLogger("esri.geometry.support.meshUtils.centerAt");function z(e,t,r){var n;if(e.vertexAttributes&&e.vertexAttributes.position){var a=null!==(n=null===r||void 0===r?void 0:r.origin)&&void 0!==n?n:e.origin;(0,i.pC)(e.transform)?(null!=(null===r||void 0===r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&_.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported")),function(e,t,r){var n=t.x-r.x,a=t.y-r.y,i=t.hasZ&&r.hasZ?t.z-r.z:0,o=e.origin;e.origin=[o[0]+n,o[1]+a,o[2]+i]}(e.transform,t,a)):(0,U.h)(e.spatialReference,r)?function(e,t,r){var n=(0,S.FF)(e.vertexAttributes,r,{geographic:!0}),a=(0,S.iv)(n,t,{geographic:!0}),i=a.position,o=a.normal,s=a.tangent;e.vertexAttributes.position=i,e.vertexAttributes.normal=o,e.vertexAttributes.tangent=s,e.vertexAttributesChanged()}(e,t,a):function(e,t,r){var n=D,a=T;if((0,I.KC)(t,a,e.spatialReference)){if(!(0,I.KC)(r,n,e.spatialReference)){var i=e.origin;n[0]=i.x,n[1]=i.y,n[2]=i.z,_.error("Failed to project specified origin (wkid:".concat(r.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}(function(e,t,r){if(e)for(var n=0;n<e.length;n+=3)for(var a=0;a<3;a++)e[n+a]+=t[a]-r[a]})(e.vertexAttributes.position,a,n),e.vertexAttributesChanged()}else _.error("Failed to project centerAt location (wkid:".concat(t.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")"))}(e,t,a)}}var T=(0,Z.c)(),D=(0,Z.c)(),B=r(35995);function N(){return N=(0,u.Z)((0,l.Z)().mark((function e(t,n,a){var o,s,u,c,f,p,v;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Hl)(Promise.all([r.e(9900),r.e(6782)]).then(r.bind(r,35886)),a);case 2:return o=e.sent,s=o.loadGLTFMesh,e.next=6,W(n,a);case 6:return u=e.sent,(c=s(new R.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),u.url,{resolveFile:j(u),useTransform:!0,signal:(0,i.pC)(a)?a.signal:null})).then((function(){return u.dispose()}),(function(){return u.dispose()})),e.next=11,c;case 11:f=e.sent,p=f.vertexAttributes,v=f.components,t.vertexAttributes=p,t.components=v;case 15:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function j(e){var t=(0,B.Yd)(e.url);return function(r){var n,a=(0,B.PF)(r,t,t),i=a?a.replace(/^ *\.\//,""):null;return null!==(n=i?e.files.get(i):null)&&void 0!==n?n:r}}function W(e,t){return G.apply(this,arguments)}function G(){return(G=(0,u.Z)((0,l.Z)().mark((function e(t,r){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t instanceof Blob?q.fromBlob(t):"string"==typeof t?new q(t):Array.isArray(t)?Y(t,r):K(t,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return H.apply(this,arguments)}function H(){return H=(0,u.Z)((0,l.Z)().mark((function e(t,r){var a,o,s,c,f,p,v,h,d,m,y,x;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Map,o=null,e.next=4,(0,w.WW)(t.map(function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name,e.next=3,W(t instanceof Blob?t:t.source,r);case 3:return e.t1=e.sent,e.abrupt("return",{name:e.t0,source:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:s=e.sent,c=[],f=(0,n.Z)(s);try{for(f.s();!(p=f.n()).done;)(v=p.value)&&((0,w.Hc)(r)?v.source.dispose():c.push(v))}catch(b){f.e(b)}finally{f.f()}for((0,w.k_)(r),h=0,d=c;h<d.length;h++)m=d[h],y=m.name,x=m.source,((0,i.Wi)(o)||/\.(gltf|glb)/i.test(y))&&(o=x.url),a.set(y,x.url),x.files&&x.files.forEach((function(e,t){return a.set(t,e)}));if(!(0,i.Wi)(o)){e.next=12;break}throw new g.Z("mesh-load-external:missing-files","Missing files to load external mesh source");case 12:return e.abrupt("return",new q(o,(function(){return c.forEach((function(e){return e.source.dispose()}))}),a));case 13:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function K(e,t){return X.apply(this,arguments)}function X(){return X=(0,u.Z)((0,l.Z)().mark((function e(t,n){var a,i,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Hl)(Promise.resolve().then(r.bind(r,76200)),n);case 2:if(a=e.sent,i=a.default,"string"!=typeof t.multipart[0]){e.next=10;break}return e.next=7,Promise.all(t.multipart.map(function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t,{responseType:"array-buffer"});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=t.multipart;case 11:return o=e.t0,e.abrupt("return",q.fromBlob(new Blob(o)));case 13:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}var q=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;(0,c.Z)(this,e),this.url=t,this.dispose=r,this.files=n}return(0,f.Z)(e,null,[{key:"fromBlob",value:function(t){var r=URL.createObjectURL(t);return new e(r,(function(){return URL.revokeObjectURL(r)}))}}]),e}(),V=r(22753),Q=r(11873),J=r(81949),$=r(11186),ee=r(29691),te=r(11700);function re(e,t,r){var n,a;e.vertexAttributes&&e.vertexAttributes.position&&((0,i.pC)(e.transform)?(null!=(null===r||void 0===r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&y.Z.getLogger("esri.geometry.support.meshUtils.offset").warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported")),function(e,t){var r=e.origin;e.origin=(0,$.a)((0,Z.c)(),r,t)}(e.transform,t)):(0,U.h)(e.spatialReference,r)?function(e,t){var r=e.spatialReference,n=e.vertexAttributes.position,a=e.vertexAttributes.normal,o=e.vertexAttributes.tangent,s=new Float64Array(n.length),l=(0,i.pC)(a)?new Float32Array(a.length):null,u=(0,i.pC)(o)?new Float32Array(o.length):null,c=e.extent.center,f=ae;(0,I.Bm)(r,[c.x,c.y,c.z],ie,(0,ee.rS)(r)),(0,V.f)(oe,ie),(0,$.t)(f,t,oe),(0,te.XO)(n,r,s),(0,i.pC)(a)&&(0,i.pC)(l)&&(0,te.Iz)(a,n,s,r,l),(0,i.pC)(o)&&(0,i.pC)(u)&&(0,te.wi)(o,n,s,r,u),ne(s,f),(0,te.To)(s,n,r),(0,i.pC)(a)&&(0,i.pC)(l)&&(0,te.Yk)(l,n,s,r,a),(0,i.pC)(o)&&(0,i.pC)(u)&&(0,te.M2)(u,n,s,r,o),e.vertexAttributesChanged()}(e,t):(a=t,ne((n=e).vertexAttributes.position,a),n.vertexAttributesChanged()))}function ne(e,t){if(e)for(var r=0;r<e.length;r+=3)for(var n=0;n<3;n++)e[r+n]+=t[n]}var ae=(0,Z.c)(),ie=(0,J.c)(),oe=(0,Q.c)();var se={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function le(e,t,r){e.isPlane||function(e){for(var t=0;t<e.position.length;t+=3)e.position[t+2]+=.5}(e),function(e,t){if(null==t)return;var r="number"==typeof t?[t,t,t]:[null!=t.width?t.width:1,null!=t.depth?t.depth:1,null!=t.height?t.height:1];pe[0]=r[0],pe[4]=r[1],pe[8]=r[2];for(var n=0;n<e.position.length;n+=3){for(var a=0;a<3;a++)fe[a]=e.position[n+a];(0,$.t)(fe,fe,pe);for(var i=0;i<3;i++)e.position[n+i]=fe[i]}if(r[0]!==r[1]||r[1]!==r[2]){pe[0]=1/r[0],pe[4]=1/r[1],pe[8]=1/r[2];for(var o=0;o<e.normal.length;o+=3){for(var s=0;s<3;s++)fe[s]=e.normal[o+s];(0,$.t)(fe,fe,pe),(0,$.n)(fe,fe);for(var l=0;l<3;l++)e.normal[o+l]=fe[l]}}}(e,null===r||void 0===r?void 0:r.size);var n=(0,S.w1)(e,t,r),a=n.vertexAttributes,i=n.transform;return{vertexAttributes:new O.Q((0,s.Z)((0,s.Z)({},a),{},{uv:e.uv})),transform:i,components:[new L.Z({faces:e.faces,material:r&&r.material||null})],spatialReference:t.spatialReference}}var ue={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},ce={south:0,east:1,north:2,west:3,up:4,down:5},fe=(0,Z.c)(),pe=(0,Q.c)(),ve=r(14226),he=y.Z.getLogger("esri.geometry.support.meshUtils.rotate");function ge(e,t,r){if(e.vertexAttributes&&e.vertexAttributes.position&&0!==t[3]){var n=e.spatialReference;if((0,i.pC)(e.transform)){var a;null!=(null===r||void 0===r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&he.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported"));var o=null!==(a=null===r||void 0===r?void 0:r.origin)&&void 0!==a?a:e.transform.getOriginPoint(n);!function(e,t,r){var n=(0,$.s)(me,r.x,r.y,r.z),a=(0,$.b)(me,n,e.origin);e.applyLocalInverse(a,ye),e.rotation=(0,F.qC)(e.rotation,t,(0,F.Ue)()),e.applyLocalInverse(a,a),(0,$.b)(a,a,ye),e.translation=(0,$.a)((0,Z.c)(),e.translation,a)}(e.transform,t,o)}else{var s,l=null!==(s=null===r||void 0===r?void 0:r.origin)&&void 0!==s?s:e.origin;(0,U.h)(e.spatialReference,r)?function(e,t,r){var n=e.spatialReference,a=(0,ee.rS)(n),o=Ae;(0,I.KC)(r,o,a)||(0,I.KC)(e.origin,o,a);var s=e.vertexAttributes.position,l=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,c=new Float64Array(s.length),f=(0,i.pC)(l)?new Float32Array(l.length):null,p=(0,i.pC)(u)?new Float32Array(u.length):null;(0,I.Bm)(a,o,we,a),(0,V.f)(be,we);var v=xe;(0,$.t)((0,F.ZZ)(xe),(0,F.ZZ)(t),be),v[3]=t[3],(0,te.XO)(s,n,c),(0,i.pC)(l)&&(0,i.pC)(f)&&(0,te.Iz)(l,s,c,n,f),(0,i.pC)(u)&&(0,i.pC)(p)&&(0,te.wi)(u,s,c,n,p),de(c,v,3,o),(0,te.To)(c,s,n),(0,i.pC)(l)&&(0,i.pC)(f)&&(de(f,v,3),(0,te.Yk)(f,s,c,n,l)),(0,i.pC)(u)&&(0,i.pC)(p)&&(de(p,v,4),(0,te.M2)(p,s,c,n,u)),e.vertexAttributesChanged()}(e,t,l):function(e,t,r){var n=Ae;if(!(0,I.KC)(r,n,e.spatialReference)){var a=e.origin;n[0]=a.x,n[1]=a.y,n[2]=a.z,he.error("Failed to project specified origin (wkid:".concat(r.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}de(e.vertexAttributes.position,t,3,n),de(e.vertexAttributes.normal,t,3),de(e.vertexAttributes.tangent,t,4),e.vertexAttributesChanged()}(e,t,l)}}}function de(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Z.Z;if(!(0,i.Wi)(e)){(0,ve.d)(we,(0,F.WH)(t),(0,F.ZZ)(t));for(var a=0;a<e.length;a+=r){for(var o=0;o<3;o++)me[o]=e[a+o]-n[o];(0,$.m)(me,me,we);for(var s=0;s<3;s++)e[a+s]=me[s]+n[s]}}}var me=(0,Z.c)(),ye=(0,Z.c)(),xe=(0,F.Ue)(),we=(0,J.c)(),be=(0,Q.c)(),Ae=(0,Z.c)(),Ce=y.Z.getLogger("esri.geometry.support.meshUtils.scale");function Ze(e,t,r){if(e.vertexAttributes&&e.vertexAttributes.position){var n=e.spatialReference;if((0,i.pC)(e.transform)){var a;null!=(null===r||void 0===r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&Ce.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported"));var o=null!==(a=null===r||void 0===r?void 0:r.origin)&&void 0!==a?a:e.transform.getOriginPoint(n);!function(e,t,r){var n=(0,$.s)(Me,r.x,r.y,r.z),a=(0,$.b)(Me,n,e.origin);e.applyLocalInverse(a,Fe);var i=(0,$.g)((0,Z.c)(),e.scale,t);e.scale=i,e.applyLocalInverse(a,a),(0,$.b)(a,a,Fe),e.translation=(0,$.a)((0,Z.c)(),e.translation,a)}(e.transform,t,o)}else{var s=(0,U.h)(e.spatialReference,r),l=r&&r.origin||e.origin;s?function(e,t,r){var n=e.spatialReference,a=(0,ee.rS)(n),o=Le;(0,I.KC)(r,o,a)||(0,I.KC)(e.origin,o,a);var s=e.vertexAttributes.position,l=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,c=new Float64Array(s.length),f=(0,i.pC)(l)?new Float32Array(l.length):null,p=(0,i.pC)(u)?new Float32Array(u.length):null;(0,te.XO)(s,n,c),(0,i.pC)(l)&&(0,i.pC)(f)&&(0,te.Iz)(l,s,c,n,f),(0,i.pC)(u)&&(0,i.pC)(p)&&(0,te.wi)(u,s,c,n,p),ke(c,t,o),(0,te.To)(c,s,n),(0,i.pC)(l)&&(0,i.pC)(f)&&(0,te.Yk)(f,s,c,n,l),(0,i.pC)(u)&&(0,i.pC)(p)&&(0,te.M2)(p,s,c,n,u),e.vertexAttributesChanged()}(e,t,l):function(e,t,r){var n=Le;if(!(0,I.KC)(r,n,e.spatialReference)){var a=e.origin;n[0]=a.x,n[1]=a.y,n[2]=a.z,Ce.error("Failed to project specified origin (wkid:".concat(r.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}ke(e.vertexAttributes.position,t,n),e.vertexAttributesChanged()}(e,t,l)}}}function ke(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Z;if(e)for(var n=0;n<e.length;n+=3){for(var a=0;a<3;a++)Me[a]=e[n+a]-r[a];(0,$.g)(Me,Me,t);for(var i=0;i<3;i++)e[n+i]=Me[i]+r[i]}}var Re,Me=(0,Z.c)(),Fe=(0,Z.c)(),Le=(0,Z.c)(),Ee="esri.geometry.Mesh",Oe=Re=function(e){(0,p.Z)(a,e);var t=(0,v.Z)(a);function a(e){var r;return(0,c.Z)(this,a),(r=t.call(this,e)).components=null,r.transform=null,r.external=null,r.hasZ=!0,r.hasM=!1,r.vertexAttributes=new O.Q,r.type="mesh",r}return(0,f.Z)(a,[{key:"initialize",value:function(){var e=this;((0,i.Wi)(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when((function(){e.handles.add((0,b.YP)((function(){var t;return{vertexAttributes:e.vertexAttributes,components:null===(t=e.components)||void 0===t?void 0:t.map((function(e){return e.clone()}))}}),(function(){return e._set("external",null)}),{once:!0,sync:!0}))}))}},{key:"hasExtent",get:function(){return!this.loaded&&(0,i.pC)(this.external)&&(0,i.pC)(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}},{key:"_boundingInfo",get:function(){var e=this.vertexAttributes.position,t=this.spatialReference;if(0===e.length||this.components&&0===this.components.length)return{extent:new o.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t}),center:new R.Z({x:0,y:0,z:0,spatialReference:t})};for(var r=(0,i.pC)(this.transform)?this.transform.project(e,t):e,n=1/0,a=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0,f=0,p=0,v=0,h=r.length,g=1/(h/3),d=0;d<h;){var m=r[d++],y=r[d++],x=r[d++];n=Math.min(n,m),a=Math.min(a,y),s=Math.min(s,x),l=Math.max(l,m),u=Math.max(u,y),c=Math.max(c,x),f+=g*m,p+=g*y,v+=g*x}return{extent:new o.Z({xmin:n,ymin:a,zmin:s,xmax:l,ymax:u,zmax:c,spatialReference:t}),center:new R.Z({x:f,y:p,z:v,spatialReference:t})}}},{key:"anchor",get:function(){if((0,i.pC)(this.transform))return this.transform.getOriginPoint(this.spatialReference);var e=this._boundingInfo;return new R.Z({x:e.center.x,y:e.center.y,z:e.extent.zmin,spatialReference:this.spatialReference})}},{key:"origin",get:function(){return(0,i.pC)(this.transform)?this.transform.getOriginPoint(this.spatialReference):this._boundingInfo.center}},{key:"extent",get:function(){return!this.loaded&&(0,i.pC)(this.external)&&(0,i.pC)(this.external.extent)?this.external.extent.clone():this._boundingInfo.extent}},{key:"addComponent",value:function(e){this.loaded?(this.components||(this.components=[]),this.components.push(L.Z.from(e)),this.notifyChange("components")):y.Z.getLogger(this.declaredClass).error("addComponent()","Mesh must be loaded before applying operations")}},{key:"removeComponent",value:function(e){if(this.loaded){if(this.components){var t=this.components.indexOf(e);if(-1!==t)return this.components.splice(t,1),void this.notifyChange("components")}y.Z.getLogger(this.declaredClass).error("removeComponent()","Provided component is not part of the list of components")}else y.Z.getLogger(this.declaredClass).error("removeComponent()","Mesh must be loaded before applying operations")}},{key:"rotate",value:function(e,t,r,n){return(0,F.uT)(Ue.x,e,Se),(0,F.uT)(Ue.y,t,_e),(0,F.uT)(Ue.z,r,ze),(0,F.qC)(Se,_e,Se),(0,F.qC)(Se,ze,Se),ge(this,Se,n),this}},{key:"offset",value:function(e,t,r,n){return this.loaded?(Te[0]=e,Te[1]=t,Te[2]=r,re(this,Te,n),this):(y.Z.getLogger(this.declaredClass).error("offset()","Mesh must be loaded before applying operations"),this)}},{key:"scale",value:function(e,t){return this.loaded?(Ze(this,e,t),this):(y.Z.getLogger(this.declaredClass).error("scale()","Mesh must be loaded before applying operations"),this)}},{key:"centerAt",value:function(e,t){return this.loaded?(z(this,e,t),this):(y.Z.getLogger(this.declaredClass).error("centerAt()","Mesh must be loaded before applying operations"),this)}},{key:"load",value:function(e){return(0,i.pC)(this.external)&&this.addResolvingPromise(function(e,t,r){return N.apply(this,arguments)}(this,this.external.source,e)),Promise.resolve(this)}},{key:"updateExternalSource",value:function(e){this._set("external",e)}},{key:"clone",value:function(){var e=null;if(this.components){var t=new Map,r=new Map;e=this.components.map((function(e){return e.cloneWithDeduplication(t,r)}))}var n={components:e,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:(0,i.pC)(this.transform)?this.transform.clone():null,external:(0,i.pC)(this.external)?{source:this.external.source,extent:(0,i.pC)(this.external.extent)?this.external.extent.clone():null}:null};return new Re(n)}},{key:"vertexAttributesChanged",value:function(){this.notifyChange("vertexAttributes")}},{key:"toBinaryGLTF",value:function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t){var n,a,i,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.e(5477).then(r.bind(r,95477)),a=this.load(),e.next=4,Promise.all([n,a]);case 4:return i=e.sent,o=i[0].toBinaryGLTF,e.abrupt("return",o(this,t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"createBox",value:function(e,t){if(!(e instanceof R.Z))return y.Z.getLogger(Ee).error(".createBox()","expected location to be a Point instance"),null;var r=new Re(le(function(){for(var e=ue.faceDescriptions,t=ue.faceVertexOffsets,r=ue.uvScales,a=4*e.length,i=new Float64Array(3*a),o=new Float32Array(3*a),s=new Float32Array(2*a),l=new Uint32Array(2*e.length*3),u=0,c=0,f=0,p=0,v=0;v<e.length;v++){var h,g=e[v],d=u/3,m=(0,n.Z)(t);try{for(m.s();!(h=m.n()).done;){var y=h.value;l[p++]=d+y}}catch(Z){m.e(Z)}finally{m.f()}for(var x=g.corners,w=0;w<4;w++){var b=x[w],A=0;s[f++]=.25*r[w][0]+g.uvOrigin[0],s[f++]=g.uvOrigin[1]-.25*r[w][1];for(var C=0;C<3;C++)0!==g.axis[C]?(i[u++]=.5*g.axis[C],o[c++]=g.axis[C]):(i[u++]=.5*b[A++],o[c++]=0)}}return{position:i,normal:o,uv:s,faces:l}}(),e,t));return t&&t.imageFace&&"all"!==t.imageFace?function(e,t){for(var r=e.components[0],n=r.faces,a=ce[t],o=6*a,s=new Array(6),l=new Array(n.length-6),u=0,c=0,f=0;f<n.length;f++)f>=o&&f<o+6?s[u++]=n[f]:l[c++]=n[f];if((0,i.pC)(e.vertexAttributes.uv)){for(var p=new Float32Array(e.vertexAttributes.uv),v=4*a*2,h=[0,1,1,1,1,0,0,0],g=0;g<h.length;g++)p[v+g]=h[g];e.vertexAttributes.uv=p}return e.components=[new L.Z({faces:s,material:r.material}),new L.Z({faces:l})],e}(r,t.imageFace):r}},{key:"createSphere",value:function(e,t){return e instanceof R.Z?new Re(le(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.round(8*Math.pow(2,e)),r=2*t,n=(t-1)*(r+1)+2*r,a=new Float64Array(3*n),i=new Float32Array(3*n),o=new Float32Array(2*n),s=new Uint32Array((t-1)*r*2*3),l=0,u=0,c=0,f=0,p=0;p<=t;p++){var v=p/t*Math.PI+.5*Math.PI,h=Math.cos(v),g=Math.sin(v);fe[2]=g;for(var d=0===p||p===t,m=d?r-1:r,y=0;y<=m;y++){var x=y/m*2*Math.PI;fe[0]=-Math.sin(x)*h,fe[1]=Math.cos(x)*h;for(var w=0;w<3;w++)a[l]=.5*fe[w],i[l]=fe[w],++l;o[u++]=(y+(d?.5:0))/r,o[u++]=p/t,0!==p&&y!==r&&(p!==t&&(s[c++]=f,s[c++]=f+1,s[c++]=f-r),1!==p&&(s[c++]=f,s[c++]=f-r,s[c++]=f-r-1)),f++}}return{position:a,normal:i,uv:o,faces:s}}(t&&t.densificationFactor||0),e,t)):(y.Z.getLogger(Ee).error(".createSphere()","expected location to be a Point instance"),null)}},{key:"createCylinder",value:function(e,t){return e instanceof R.Z?new Re(le(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.round(16*Math.pow(2,e)),r=4*(t+1)+2*t,n=new Float64Array(3*r),a=new Float32Array(3*r),i=new Float32Array(2*r),o=new Uint32Array(4*t*3),s=0,l=0,u=0,c=0,f=0,p=0;p<=5;p++)for(var v=0===p||5===p,h=p<=1||p>=4,g=2===p||4===p,d=v?t-1:t,m=0;m<=d;m++){var y=m/d*2*Math.PI,x=v?0:.5;fe[0]=x*Math.sin(y),fe[1]=x*-Math.cos(y),fe[2]=p<=2?.5:-.5;for(var w=0;w<3;w++)n[s++]=fe[w],a[l++]=h?2===w?p<=1?1:-1:0:2===w?0:fe[w]/x;i[u++]=(m+(v?.5:0))/t,i[u++]=p<=1?1*p/3:p<=3?1*(p-2)/3+1/3:1*(p-4)/3+2/3,g||0===p||m===t||(5!==p&&(o[c++]=f,o[c++]=f+1,o[c++]=f-t),1!==p&&(o[c++]=f,o[c++]=f-t,o[c++]=f-t-1)),f++}return{position:n,normal:a,uv:i,faces:o}}(t&&t.densificationFactor||0),e,t)):(y.Z.getLogger(Ee).error(".createCylinder()","expected location to be a Point instance"),null)}},{key:"createPlane",value:function(e,t){var r;if(!(e instanceof R.Z))return y.Z.getLogger(Ee).error(".createPlane()","expected location to be a Point instance"),null;var n=null!==(r=null===t||void 0===t?void 0:t.facing)&&void 0!==r?r:"up",a=function(e,t){var r="number"==typeof t?t:null!=t?t.width:1,n="number"==typeof t?t:null!=t?t.height:1;switch(e){case"up":case"down":return{width:r,depth:n};case"north":case"south":return{width:r,height:n};case"east":case"west":return{depth:r,height:n}}}(n,null===t||void 0===t?void 0:t.size);return new Re(le(function(e){for(var t=se.facingAxisOrderSwap[e],r=se.position,n=se.normal,a=new Float64Array(r.length),i=new Float32Array(n.length),o=0,s=0;s<4;s++)for(var l=o,u=0;u<3;u++){var c=t[u],f=Math.abs(c)-1,p=c>=0?1:-1;a[o]=r[l+f]*p,i[o]=n[l+f]*p,o++}return{position:a,normal:i,uv:new Float32Array(se.uv),faces:new Uint32Array(se.faces),isPlane:!0}}(n),e,(0,s.Z)((0,s.Z)({},t),{},{size:a})))}},{key:"createFromPolygon",value:function(e,t){var r;if(!(e instanceof M.Z))return y.Z.getLogger(Ee).error(".createFromPolygon()","expected polygon to be a Polygon instance"),null;var n=(0,P.bT)(e);return new Re({vertexAttributes:new O.Q({position:n.position}),components:[new L.Z({faces:n.faces,shading:"flat",material:null!==(r=null===t||void 0===t?void 0:t.material)&&void 0!==r?r:null})],spatialReference:e.spatialReference})}},{key:"createFromGLTF",value:function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t,n,a){var i,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof R.Z){e.next=2;break}throw y.Z.getLogger(Ee).error(".createfromGLTF()","expected location to be a Point instance"),new g.Z("invalid-input","Expected location to be a Point instance");case 2:return e.next=4,(0,w.Hl)(Promise.all([r.e(9900),r.e(6782)]).then(r.bind(r,35886)),a);case 4:return i=e.sent,o=i.loadGLTFMesh,e.t0=Re,e.next=9,o(t,n,a);case 9:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"createWithExternalSource",value:function(e,t,r){var n,a,i,o,s=null!==(n=null===r||void 0===r?void 0:r.extent)&&void 0!==n?n:null,l=null!==(a=null===r||void 0===r||null===(i=r.transform)||void 0===i?void 0:i.clone())&&void 0!==a?a:new E.Z;l.origin=[e.x,e.y,null!==(o=e.z)&&void 0!==o?o:0];var u=e.spatialReference;return new Re({external:{source:t,extent:s},transform:l,spatialReference:u})}},{key:"createIncomplete",value:function(e,t){var r,n,a,i=null!==(r=null===t||void 0===t||null===(n=t.transform)||void 0===n?void 0:n.clone())&&void 0!==r?r:new E.Z;i.origin=[e.x,e.y,null!==(a=e.z)&&void 0!==a?a:0];var o=e.spatialReference,s=new Re({transform:i,spatialReference:o});return s.addResolvingPromise(Promise.reject(new g.Z("mesh-incomplete","Mesh resources are not complete"))),s}}]),a}((0,d.p)(m.Z.LoadableMixin((0,x.v)(k.Z))));(0,h._)([(0,A.Cb)({type:[L.Z],json:{write:!0}})],Oe.prototype,"components",void 0),(0,h._)([(0,A.Cb)({type:E.Z,json:{write:!0}})],Oe.prototype,"transform",void 0),(0,h._)([(0,A.Cb)({constructOnly:!0})],Oe.prototype,"external",void 0),(0,h._)([(0,A.Cb)({readOnly:!0})],Oe.prototype,"hasExtent",null),(0,h._)([(0,A.Cb)({readOnly:!0})],Oe.prototype,"_boundingInfo",null),(0,h._)([(0,A.Cb)({readOnly:!0})],Oe.prototype,"anchor",null),(0,h._)([(0,A.Cb)({readOnly:!0})],Oe.prototype,"origin",null),(0,h._)([(0,A.Cb)({readOnly:!0,json:{read:!1}})],Oe.prototype,"extent",null),(0,h._)([(0,A.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],Oe.prototype,"hasZ",void 0),(0,h._)([(0,A.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],Oe.prototype,"hasM",void 0),(0,h._)([(0,A.Cb)({type:O.Q,nonNullable:!0,json:{write:!0}})],Oe.prototype,"vertexAttributes",void 0),Oe=Re=(0,h._)([(0,C.j)(Ee)],Oe);var Pe,Ie,Ue={x:(0,Z.f)(1,0,0),y:(0,Z.f)(0,1,0),z:(0,Z.f)(0,0,1)},Se=(0,F.Ue)(),_e=(0,F.Ue)(),ze=(0,F.Ue)(),Te=(0,Z.c)(),De=Oe,Be=r(78952),Ne=r(49818);function je(e,t,r){var o,s=r.features;r.features=[],delete r.geometryType;var l=Ne.Z.fromJSON(r);if(l.geometryType="mesh",!r.assetMaps)return l;var u,c,f=function(e,t){var r,a=new Map,i=(0,n.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.parentGlobalId;if(null!=s){var l=o.assetName,u=o.assetURL,c=o.conversionStatus,f=a.get(s);if(null==f)switch(f={name:l,status:Pe.FAILED,url:u,projectVertices:Ge(o.flags).projectVertices},a.set(s,f),c){case"COMPLETED":case"SUBMITTED":f.status=Pe.COMPLETED;break;case"INPROGRESS":f.status=Pe.PENDING;break;default:f.status=Pe.FAILED}else console.warn("Multiple asset parts not expected. Ignoring additional parts. conflicting assetname: ".concat(o.assetName))}}}catch(p){i.e(p)}finally{i.f()}return a}(0,r.assetMaps),p=null!==(o=l.spatialReference)&&void 0!==o?o:Be.Z.WGS84,v=r.globalIdFieldName,h=e.outFields,g=(0,i.pC)(h)&&h.length>0?(u=h.includes("*")?null:new Set(h),function(e){var t=e.attributes;if(!t)return{};if(!u)return t;for(var r in t)u.has(r)||delete t[r];return t}):function(){return{}},d=(0,n.Z)(s);try{for(d.s();!(c=d.n()).done;){var m=c.value,y=We(m,v,p,t,f);(0,i.pC)(y)&&l.features.push(new a.Z({geometry:y,attributes:g(m)}))}}catch(x){d.e(x)}finally{d.f()}return l}function We(e,t,r,n,a){var i=e.attributes[t],s=a.get(i);if(null==s||s.status===Pe.FAILED||null==s.url)return null;var l=function(e,t,r){var n=e.attributes,a=r.transformFieldRoles;return new R.Z({x:n[a.originX],y:n[a.originY],z:n[a.originZ],spatialReference:t})}(e,r,n),u=o.Z.fromJSON(e.geometry);u.spatialReference=r;var c=function(e,t,r){var n=t.transformFieldRoles;return new E.Z({translation:[e[n.translationX],-e[n.translationZ],e[n.translationY]],rotation:(0,F.uT)([e[n.rotationX],e[n.rotationZ],e[n.rotationY]],e[n.rotationDeg]),scale:[e[n.scaleX],e[n.scaleY],e[n.scaleZ]],geographic:r})}(e.attributes,n,s.projectVertices);return s.status===Pe.PENDING?De.createIncomplete(l,{extent:u,transform:c}):De.createWithExternalSource(l,[{name:s.name,source:s.url}],{extent:u,transform:c})}function Ge(e){return{projectVertices:e.includes("PROJECT_VERTICES")}}(Ie=Pe||(Pe={}))[Ie.FAILED=0]="FAILED",Ie[Ie.PENDING=1]="PENDING",Ie[Ie.COMPLETED=2]="COMPLETED"},88699:function(e,t,r){r.d(t,{QZ:function(){return i},Rq:function(){return o},bg:function(){return a}});var n=r(18722);function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e<=n.DB?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function i(e){return length<=n.DB?Array.from(e):new Float64Array(e)}function o(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}},72838:function(e,t,r){r.d(t,{$z:function(){return o},DX:function(){return f},mi:function(){return i},p:function(){return c}});var n=r(37762),a=r(18722);function i(e){if(Array.isArray(e)){if(e.length<a.DB)return e;var t,r=(0,n.Z)(e);try{for(r.s();!(t=r.n()).done;){if(t.value>=65536)return new Uint32Array(e)}}catch(s){r.e(s)}finally{r.f()}return new Uint16Array(e)}if(e.length<a.DB)return Array.from(e);if(e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return e;var i,o=(0,n.Z)(e);try{for(o.s();!(i=o.n()).done;){if(i.value>=65536)return e}}catch(s){o.e(s)}finally{o.f()}return new Uint16Array(e)}function o(e){var t=3*e;return t<=a.DB?new Array(t):t<=65536?new Uint16Array(t):new Uint32Array(t)}var s=function(){for(var e=new Uint32Array(131072),t=0;t<e.length;++t)e[t]=t;return e}(),l=[0],u=function(){for(var e=new Uint16Array(65536),t=0;t<e.length;++t)e[t]=t;return e}();function c(e){if(1===e)return l;if(e<a.DB)return Array.from(new Uint16Array(u.buffer,0,e));if(e<u.length)return new Uint16Array(u.buffer,0,e);if(e>s.length){var t=Math.max(2*s.length,e);s=new Uint32Array(t);for(var r=0;r<s.length;r++)s[r]=r}return new Uint32Array(s.buffer,0,e)}function f(e){if(1===e)return l;if(e<a.DB)return Array.from(new Uint16Array(u.buffer,0,e));if(e<u.length)return new Uint16Array(u.slice(0,e));if(e>s.length){for(var t=new Uint32Array(e),r=0;r<t.length;r++)t[r]=r;return t}return new Uint32Array(s.slice(0,e))}}}]);
//# sourceMappingURL=5957.a23880cd.chunk.js.map