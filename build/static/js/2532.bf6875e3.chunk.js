"use strict";(self.webpackChunkcommonlands_web=self.webpackChunkcommonlands_web||[]).push([[2532],{11873:function(r,e,t){function n(){return[1,0,0,0,1,0,0,0,1]}function o(r,e,t,n,o,a,u,l,i){return[r,e,t,n,o,a,u,l,i]}function a(r,e){return new Float64Array(r,e,9)}t.d(e,{a:function(){return a},c:function(){return n},f:function(){return o}});Object.freeze(Object.defineProperty({__proto__:null,clone:function(r){return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8]]},create:n,createView:a,fromValues:o},Symbol.toStringTag,{value:"Module"}))},98131:function(r,e,t){function n(){return[0,0,0,1]}function o(r){return[r[0],r[1],r[2],r[3]]}function a(r,e){return new Float64Array(r,e,4)}t.d(e,{I:function(){return u},a:function(){return n},b:function(){return o},c:function(){return a}});var u=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:o,create:n,createView:a,fromValues:function(r,e,t,n){return[r,e,t,n]}},Symbol.toStringTag,{value:"Module"}))},35482:function(r,e,t){t.r(e),t.d(e,{default:function(){return M}});var n=t(37762),o=t(15671),a=t(43144),u=t(92026),l=t(18722),i=t(48976),f=t(4582),c=t(11186),s=t(8229),v=t(79803),b=t(78952),d=t(21134),p=t(89431),h=t(87005),y=t(28278),m=t(2821);function g(r,e,t){return(0,u.pC)(r)&&r.attributeInfo.useElevation?e?function(r,e){for(var t=new Float64Array(e),n=0;n<e;n++)t[n]=r[3*n+2];return t}(e,t):null:(0,u.pC)(r)&&r.attributeInfo.storageInfo?(0,y.qM)(r.attributeInfo.storageInfo,r.buffer,t):null}function I(r,e,t,o,a){for(var u=r.length/3,l=0,i=0;i<u;i++){for(var f=!0,c=0;c<o.length&&f;c++){var s=o[c].filterJSON,v=a[c].values[i];switch(s.type){case"pointCloudValueFilter":var b="exclude"===s.mode;s.values.includes(v)===b&&(f=!1);break;case"pointCloudBitfieldFilter":var d=A(s.requiredSetBits),p=A(s.requiredClearBits);(v&d)===d&&0==(v&p)||(f=!1);break;case"pointCloudReturnFilter":var h,y=15&v,m=v>>>4&15,g=m>1,I=1===y,w=y===m,C=!1,S=(0,n.Z)(s.includedReturns);try{for(S.s();!(h=S.n()).done;){var M=h.value;if("last"===M&&w||"firstOfMany"===M&&I&&g||"lastOfMany"===M&&w&&g||"single"===M&&!g){C=!0;break}}}catch(_){S.e(_)}finally{S.f()}C||(f=!1)}}f&&(t[l]=i,r[3*l]=r[3*i],r[3*l+1]=r[3*i+1],r[3*l+2]=r[3*i+2],e[3*l]=e[3*i],e[3*l+1]=e[3*i+1],e[3*l+2]=e[3*i+2],l++)}return l}function w(r){return null==r||"none"===r?null:"low-four-bit"===r?function(r){return 15&r}:"high-four-bit"===r?function(r){return(240&r)>>4}:"absolute-value"===r?function(r){return Math.abs(r)}:"modulo-ten"===r?function(r){return r%10}:null}function A(r){var e,t=0,o=(0,n.Z)(r||[]);try{for(o.s();!(e=o.n()).done;){t|=1<<e.value}}catch(a){o.e(a)}finally{o.f()}return t}var C=function(){function r(){(0,o.Z)(this,r)}return(0,a.Z)(r,[{key:"transform",value:function(r){var e=this._transform(r),t=[e.points.buffer,e.rgb.buffer];(0,u.pC)(e.pointIdFilterMap)&&t.push(e.pointIdFilterMap.buffer);var o,a=(0,n.Z)(e.attributes);try{for(a.s();!(o=a.n()).done;){var i=o.value;"buffer"in i.values&&(0,l.eP)(i.values.buffer)&&i.values.buffer!==e.rgb.buffer&&t.push(i.values.buffer)}}catch(f){a.e(f)}finally{a.f()}return Promise.resolve({result:e,transferList:t})}},{key:"_transform",value:function(r){var e=function(r,e){if(null==r.encoding||""===r.encoding){var t=(0,y.W7)(e,r);if((0,u.Wi)(t.vertexAttributes.position))return;for(var n=(0,y.I_)(e,t.vertexAttributes.position),o=t.header.fields,a=[o.offsetX,o.offsetY,o.offsetZ],l=[o.scaleX,o.scaleY,o.scaleZ],i=n.length/3,f=new Float64Array(3*i),c=0;c<i;c++)f[3*c]=n[3*c]*l[0]+a[0],f[3*c+1]=n[3*c+1]*l[1]+a[1],f[3*c+2]=n[3*c+2]*l[2]+a[2];return f}if("lepcc-xyz"===r.encoding)return(0,m.Gi)(e).result}(r.schema,r.geometryBuffer),t=e.length/3,o=null,a=[],l=g(r.primaryAttributeData,e,t);(0,u.pC)(r.primaryAttributeData)&&l&&a.push({attributeInfo:r.primaryAttributeData.attributeInfo,values:l});var i=g(r.modulationAttributeData,e,t);(0,u.pC)(r.modulationAttributeData)&&i&&a.push({attributeInfo:r.modulationAttributeData.attributeInfo,values:i});var f=function(r,e,t,n){var o=r.rendererJSON,a=r.isRGBRenderer,u=null,l=null;if(e&&a)u=e;else if(e&&"pointCloudUniqueValueRenderer"===(null===o||void 0===o?void 0:o.type)){var i=(l=h.Z.fromJSON(o)).colorUniqueValueInfos;u=new Uint8Array(3*n);for(var f=w(l.fieldTransformType),c=0;c<n;c++)for(var s=(f?f(e[c]):e[c])+"",v=0;v<i.length;v++)if(i[v].values.includes(s)){u[3*c]=i[v].color.r,u[3*c+1]=i[v].color.g,u[3*c+2]=i[v].color.b;break}}else if(e&&"pointCloudStretchRenderer"===(null===o||void 0===o?void 0:o.type)){var b=(l=p.Z.fromJSON(o)).stops;u=new Uint8Array(3*n);for(var y=w(l.fieldTransformType),m=0;m<n;m++){var g=y?y(e[m]):e[m],I=b.length-1;if(g<b[0].value)u[3*m]=b[0].color.r,u[3*m+1]=b[0].color.g,u[3*m+2]=b[0].color.b;else if(g>=b[I].value)u[3*m]=b[I].color.r,u[3*m+1]=b[I].color.g,u[3*m+2]=b[I].color.b;else for(var A=1;A<b.length;A++)if(g<b[A].value){var C=(g-b[A-1].value)/(b[A].value-b[A-1].value);u[3*m]=b[A].color.r*C+b[A-1].color.r*(1-C),u[3*m+1]=b[A].color.g*C+b[A-1].color.g*(1-C),u[3*m+2]=b[A].color.b*C+b[A-1].color.b*(1-C);break}}}else if(e&&"pointCloudClassBreaksRenderer"===(null===o||void 0===o?void 0:o.type)){var S=(l=d.Z.fromJSON(o)).colorClassBreakInfos;u=new Uint8Array(3*n);for(var M=w(l.fieldTransformType),_=0;_<n;_++)for(var k=M?M(e[_]):e[_],O=0;O<S.length;O++)if(k>=S[O].minValue&&k<=S[O].maxValue){u[3*_]=S[O].color.r,u[3*_+1]=S[O].color.g,u[3*_+2]=S[O].color.b;break}}else{u=new Uint8Array(3*n);for(var Z=0;Z<u.length;Z++)u[Z]=255}if(t&&l&&l.colorModulation)for(var F=l.colorModulation.minValue,V=l.colorModulation.maxValue,D=0;D<n;D++){var T=t[D],x=T>=V?1:T<=F?.3:.3+.7*(T-F)/(V-F);u[3*D]=x*u[3*D],u[3*D+1]=x*u[3*D+1],u[3*D+2]=x*u[3*D+2]}return u}(r.rendererInfo,l,i,t);if(r.filterInfo&&r.filterInfo.length>0&&(0,u.pC)(r.filterAttributesData)){var c=r.filterAttributesData.filter(u.pC).map((function(r){var n=g(r,e,t),o={attributeInfo:r.attributeInfo,values:n};return a.push(o),o}));o=new Uint32Array(t),t=I(e,f,o,r.filterInfo,c)}var s,v=(0,n.Z)(r.userAttributesData);try{for(v.s();!(s=v.n()).done;){var A=s.value,C=g(A,e,t);a.push({attributeInfo:A.attributeInfo,values:C})}}catch(M){v.e(M)}finally{v.f()}3*t<f.length&&(f=new Uint8Array(f.buffer.slice(0,3*t))),this._applyElevationOffsetInPlace(e,t,r.elevationOffset);var S=this._transformCoordinates(e,t,r.obb,b.Z.fromJSON(r.inSR),b.Z.fromJSON(r.outSR));return{obb:r.obb,points:S,rgb:f,attributes:a,pointIdFilterMap:o}}},{key:"_transformCoordinates",value:function(r,e,t,n,o){if(!(0,v.CM)(r,n,0,r,o,0,e))throw new Error("Can't reproject");var a=(0,s.f)(t.center[0],t.center[1],t.center[2]),u=(0,s.c)(),l=(0,s.c)();(0,i.c)(S,t.quaternion);for(var f=new Float32Array(3*e),b=0;b<e;b++)u[0]=r[3*b]-a[0],u[1]=r[3*b+1]-a[1],u[2]=r[3*b+2]-a[2],(0,c.q)(l,u,S),t.halfSize[0]=Math.max(t.halfSize[0],Math.abs(l[0])),t.halfSize[1]=Math.max(t.halfSize[1],Math.abs(l[1])),t.halfSize[2]=Math.max(t.halfSize[2],Math.abs(l[2])),f[3*b]=u[0],f[3*b+1]=u[1],f[3*b+2]=u[2];return f}},{key:"_applyElevationOffsetInPlace",value:function(r,e,t){if(0!==t)for(var n=0;n<e;n++)r[3*n+2]+=t}}]),r}(),S=(0,f.c)();function M(){return new C}}}]);
//# sourceMappingURL=2532.bf6875e3.chunk.js.map